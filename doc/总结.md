# 总结



### 总体规划

在项目开始前，需要对整个项目有一个清晰的规划。如果中途更改了规划，会导致达不到原有目标，而新目标又会时间局促。在完成DBFS的过程中也出现了这种情况，前期的规划中我确定了在自己的OS中完成DBFS的开发并且与FAT32进行性能对比测试，在实验后期原有规划则是将OS移植到开发板上，这样使用真实的物理硬件得到的性能数据会更加真实可靠。但在项目过程中，在完成DBFS在自己的OS实现后，需要对文件系统进行性能测试，但是标准的测试工具目前又不能在自己的OS中运行，虽然可以自己编写测试程序，但也因为是自己编写的，只能作为参考不能当作真实可靠的测试。因此在这个阶段，就产生了新的目标，将DBFS接入到Fuse中，在linux的用户态完成文件系统的开发和测试，虽然基础工作已经有了这个新目标不会很困难，但是如果在规划初期就确定了后面会支持fuse，那么在开发过程中我们就可以针对性对fuse的实现进行一些优化，同时在接口设计，具体实现上都可以提前做好谋划，而不会说中途加入这个目标后再对项目进行重构和适配。而且因为加入了这个新的目标，导致原来打算在物理开发板进行适配的工作也取消了。总而言之，开局有一个清晰的规划是很重要的。



### 反复思考

在实现DBFS的过程中，大多数时候都是按照既定规则完成代码的编写，最终完成之后一测试发现性能太差。这个时候就需要思考实现中哪里出现了问题，那个地方是性能瓶颈。而且不一定一次你就能把所有可以优化的点想到，更大的可能是无意间就想到了一个可能存在性能瓶颈的地方，然后就可以对这个点进行测试确认是否可以进行优化。这个过程是反反复复的，不断演进的，一个点可能会有多次优化的必要。在一开始测试FAT32与DBFS的性能时，就发现FAT32的性能非常慢，而按道理说是不应该这样的，当时只是大概猜到了可能的位置，下来后一思考，只要对之前的实现加入一些字段似乎就能解决这个问题，然后修改，测试，发现确实是这样的。同样在DBFS的实现中也有许多地方出现同样的问题，每个点的改进都是平常不经意间想到。





